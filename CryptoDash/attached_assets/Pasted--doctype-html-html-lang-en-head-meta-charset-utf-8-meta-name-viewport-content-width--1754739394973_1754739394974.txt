<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Crypto Signals – Minimal Dashboard</title>
<script src="https://cdn.tailwindcss.com"></script>
<script>
async function loadData(){
  const mc = document.querySelector('#marketCap');
  const bd = document.querySelector('#btcDom');
  const fg = document.querySelector('#fearGreed');
  const cb = document.querySelector('#coinbaseRank');
  const asof = document.querySelector('#asof');

  try {
    const cg = await fetch('https://api.coingecko.com/api/v3/global').then(r=>r.json());
    mc.textContent = cg.data.total_market_cap.usd.toLocaleString('en-US',{style:'currency',currency:'USD',maximumFractionDigits:0});
    bd.textContent = cg.data.market_cap_percentage.btc.toFixed(1)+'%';

    const fgData = await fetch('https://api.alternative.me/fng/?limit=1&format=json').then(r=>r.json());
    fg.textContent = fgData.data[0].value+' – '+fgData.data[0].value_classification;

    const rss = await fetch('https://rss.applemarketingtools.com/api/v2/pt/apps/top-free/finance/200/apps.json').then(r=>r.json());
    const idx = rss.feed.results.findIndex(a=>a.id==='886427730'||/coinbase/i.test(a.name));
    cb.textContent = idx>=0 ? '#'+(idx+1)+' in PT Finance' : 'Not in top 200';

    asof.textContent = new Date().toLocaleString();
  } catch(e){
    console.error(e);
  }
}
window.onload=loadData;
</script>
</head>
<body class="bg-slate-50 text-slate-900 p-6">
<h1 class="text-2xl font-bold mb-4">Crypto Signals – Minimal Dashboard</h1>
<div class="mb-4 text-sm text-slate-500">Updated: <span id="asof">—</span></div>

<div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4">
  <div class="bg-white p-4 rounded-lg shadow"><div>Total Market Cap</div><div id="marketCap" class="text-xl font-bold">—</div></div>
  <div class="bg-white p-4 rounded-lg shadow"><div>BTC Dominance</div><div id="btcDom" class="text-xl font-bold">—</div></div>
  <div class="bg-white p-4 rounded-lg shadow"><div>Fear & Greed</div><div id="fearGreed" class="text-xl font-bold">—</div></div>
  <div class="bg-white p-4 rounded-lg shadow"><div>Coinbase Rank (PT Finance)</div><div id="coinbaseRank" class="text-xl font-bold">—</div></div>
</div>

<h2 class="mt-8 mb-2 font-semibold">Google Trends – “bitcoin” (Portugal)</h2>
<iframe style="width:100%; height:400px; border:0;" src="https://trends.google.com/trends/embed/?q=bitcoin&geo=PT&hl=en-US"></iframe>
</body>
</html>
